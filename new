local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local player = Players.LocalPlayer

local remote = ReplicatedStorage:WaitForChild("Shared"):WaitForChild("Framework"):WaitForChild("Network"):WaitForChild("Remote"):WaitForChild("Function")
local screenGui = player:WaitForChild("PlayerGui"):WaitForChild("ScreenGui")
local frame = screenGui:WaitForChild("Quests"):WaitForChild("Frame")
local main = frame:WaitForChild("Main")
local prizes = main:WaitForChild("Prizes")

-- Debugging print to check if we're iterating over prizes
print("Checking all prizes...")

for _, prize in pairs(prizes:GetChildren()) do
    local content = prize:FindFirstChild("Content")
    if content then
        local claimFrame = content:FindFirstChild("Claim")
        if claimFrame then
            -- Debugging: Check the properties of the claim frame
            print("Claim frame found in prize: " .. prize.Name)
            print("Claim frame size: " .. tostring(claimFrame.Size))
            print("Claim frame position: " .. tostring(claimFrame.Position))
            
            -- Check for a unique UI property (like a label, button, or any text)
            local claimButtonFound = false
            for _, child in pairs(claimFrame:GetChildren()) do
                if child:IsA("ImageButton") or child:IsA("TextButton") then
                    print("Found clickable child: " .. child.ClassName)
                    claimButtonFound = true
                    break
                end
            end

            if claimButtonFound then
                print("Claim button found in prize: " .. prize.Name)
                -- Call server function to claim the prize
                pcall(function()
                    remote:InvokeServer("ClaimQuest", prize.Name)
                end)
            else
                print("No clickable button inside claim frame for prize: " .. prize.Name)
            end
        else
            print("No Claim frame found in prize: " .. prize.Name)
        end
    else
        print("No Content found in prize: " .. prize.Name)
    end
end
